{% extends "admin/base.html" %}
{% load i18n admin_static %}

{% block content %}
<div id="content-main" class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
  <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
      <div class="jumbotron">
        <div class="container">
          <h1>Primerize Admin Page</h1>
          <img class="path_logo_primerize" src="" style="clear:both; float:right; padding-left: 20px;"/>
          <p>
            This page shows server status, system parameters, and explains the CherryPy framework setup.
          </p>
          <br/><br/><br/>
          <h5>by <i>t47</i>, May 2015</h5>
        </div>
      </div>
    </div>
  </div>

  <hr/>
  <div class="row">
    <div class="col-lg-3 col-md-3 hidden-sm hidden-xs" id="side">
      <div id="side_con">
        <div class="panel panel-success" id="sidebar" >
          <div class="panel-heading">
            <h3 class="panel-title"><span class="glyphicon glyphicon-th-large"></span>&nbsp;&nbsp;Sections</h3>
          </div>
          <div class="panel-body scroll_nav">
            <ul class="nav" role="tablist" id="scroll_nav">
              <li class="li-success">
                  <a id="tab_1" href="#sys_stat">
                    <span class="glyphicon glyphicon-dashboard"></span>&nbsp;&nbsp;Section #1: 
                    <br/>
                    <b>System Status</b>
                  </a>
              </li>
              <li class="li-warning">
                  <a id="tab_2" href="#sys_ovw">
                    <span class="glyphicon glyphicon-bookmark"></span>&nbsp;&nbsp;Section #2: 
                    <br/>
                    <b>Overview</b>
                  </a>
              </li>
              <li class="li-primary">
                  <a id="tab_3" href="#sys_bked">
                    <span class="glyphicon glyphicon-hdd"></span>&nbsp;&nbsp;Section #3: 
                    <br/>
                    <b>Back End</b>
                    <span class="glyphicon pull-right glyphicon-triangle-bottom" data-toggle="collapse" data-parent="#accordion" href="#collapse_tab_3" aria-expanded="true" aria-controls="collapse_tab_3"></span>
                  </a>
                  <ul id="collapse_tab_3" class="panel-collapse collapse nav" role="tabpanel" aria-labelledby="collapse_tab_3">
                    <li><a id="tab_31" href="#sys_bked_const"><span class="label label-danger">const.py</span></a></li>
                    <li><a id="tab_32" href="#sys_bked_config"><span class="label label-danger">config.py</span></a></li>
                    <li><a id="tab_33" href="#sys_bked_helper"><span class="label label-danger">helper.py</span></a></li>
                    <li>
                      <a id="tab_34" href="#sys_bked_prm"><b><span class="label label-danger">primerize.py</span></b></a>
                      <ul>
                        <li><a id="tab_342" href="#sys_bked_prm_1d"><span class="label label-warning">design_primers()</span></a></li>
                        <li><a id="tab_341" href="#sys_bked_prm">...</a></li>
                      </ul>
                    </li>
                    <li><a id="tab_35" href="#sys_bked_runserver"><b><span class="label label-danger">run_server.py</span></b></a></li>
                  </ul>
              </li>
              <li class="li-danger">
                  <a id="tab_4" href="#sys_fted">
                    <span class="glyphicon glyphicon-repeat"></span>&nbsp;&nbsp;Section #4: 
                    <br/>
                    <b>Front End</b>
                    <span class="glyphicon pull-right glyphicon-triangle-bottom" data-toggle="collapse" data-parent="#accordion" href="#collapse_tab_4" aria-expanded="true" aria-controls="collapse_tab_4"></span>
                  </a>
                  <ul id="collapse_tab_4" class="panel-collapse collapse nav" role="tabpanel" aria-labelledby="collapse_tab_4">
                    <li><a id="tab_41" href="#sys_fted_html"><span class="label label-success">res/html</span></a></li>
                    <li><a id="tab_42" href="#sys_fted_js"><span class="label label-success">res/js</span></a></li>
                    <li><a id="tab_43" href="#sys_fted_misc"><span class="label label-success">res/css</span> & <span class="label label-success">res/images</span> &amp; <span class="label label-success">res/fonts</span></a></li>
                    <li><a id="tab_44" href="#sys_fted_src"><span class="label label-primary">src</span></a></li>
                  </ul>
              </li>
              <li class="li-default">
                  <a id="tab_5" href="#sys_misc">
                    <span class="glyphicon glyphicon-cog"></span>&nbsp;&nbsp;Section #5: 
                    <br/>
                    <b>Misc</b>
                    <span class="glyphicon pull-right glyphicon-triangle-bottom" data-toggle="collapse" data-parent="#accordion" href="#collapse_tab_5" aria-expanded="true" aria-controls="collapse_tab_5"></span>
                  </a>
                  <ul id="collapse_tab_5" class="panel-collapse collapse nav" role="tabpanel" aria-labelledby="collapse_tab_5">
                    <li><a id="tab_51" href="#sys_misc_aws"><span class="glyphicon glyphicon-text-background"></span>&nbsp;&nbsp;AWS Setup</a></li>
                    <li><a id="tab_52" href="#sys_misc_ga"><span class="glyphicon glyphicon-signal"></span>&nbsp;&nbsp;Google Analytics</a></li>
                    <li><a id="tab_53" href="#sys_misc_repo"><span class="glyphicon glyphicon-download-alt"></span>&nbsp;&nbsp;Git Repositories</a></li>
                    <li><a id="tab_54" href="#sys_misc_run"><span class="glyphicon glyphicon-hourglass"></span>&nbsp;&nbsp;Run Server</a></li>
                    <li><a id="tab_55" href="#sys_misc_misc"><span class="glyphicon glyphicon-wrench"></span>&nbsp;&nbsp;Misc Setup</a></li>
                  </ul>

              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>


    <div class="pull-right col-lg-9 col-md-9 col-sm-12 col-xs-12" id="main">
      <div class="container-fluid li-success" role="main">
        <div class="panel-success" id="sys_stat">
          <div class="panel-heading">
            <span class="lead">
              <span class="glyphicon glyphicon-dashboard"></span>&nbsp;&nbsp;<b><span class="sec">Section</span> <span class="num">#1</span>: System Status</b>
            </span>
          </div>
          <br/>
          <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-6 col-xs-6">
              <table class="table">
                <thead>
                  <tr class="active"><th><span class="glyphicon glyphicon-hdd"></span>&nbsp;&nbsp;Back End</th><th><span class="glyphicon glyphicon-check"></span>&nbsp;&nbsp;Version</th></tr>
                </thead>
                <tbody>
                  <tr class="info"><td><span class="label label-inverse">Linux</span></td><td><i>3.13.048</i></td></tr>
                  <tr class="info"><td><span class="label label-primary">Python</span></td><td><i>2.7.6</i></td></tr>
                  <tr class="info"><td><span class="label label-danger">CherryPy</span></td><td><i>3.7.0</i></td></tr>
                  <tr class="info"><td><span class="label label-violet">MATLAB</span></td><td><i>7.8.0.347</i></td></tr>
                  <tr class="info"><td><span class="label label-success">RDATKit</span></td><td><i>0.6</i></td></tr>
                </tbody>
              </table>
              <table class="table">
                <thead>
                  <tr class="active"><th><span class="glyphicon glyphicon-refresh"></span>&nbsp;&nbsp;Front End</th><th><span class="glyphicon glyphicon-check"></span>&nbsp;&nbsp;Version</th></tr>
                </thead>
                <tbody>
                  <tr class="warning"><td><span class="label label-orange">jQuery</span></td><td><i>1.11.3</i></td></tr>
                  <tr class="warning"><td><span class="label label-dark-red">Bootstrap</span></td><td><i>3.3.4</i></td></tr>
                </tbody>
              </table>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-6 col-xs-6">
              <table class="table">
                <thead>
                  <tr class="active"><th><span class="glyphicon glyphicon-hourglass"></span>&nbsp;&nbsp;System</th><th><span class="glyphicon glyphicon-check"></span>&nbsp;&nbsp;Version</th></tr>
                </thead>
                <tbody>
                  <tr class=""><td><span class="label label-info">ssh</span></td><td><i>6.6.1.1</i></td></tr>
                  <tr class=""><td><span class="label label-info">screen</span></td><td><i>4.01.00</i></td></tr>
                  <tr class=""><td><span class="label label-info">tty</span></td><td><i>8.21</i></td></tr>
                  <tr class=""><td style="border-top-width: 5px;"><span class="label label-default">apache</span></td><td style="border-top-width: 5px;"><i>2.4.7</i></td></tr>
                  <tr class=""><td><span class="label label-default">git</span></td><td><i>1.9.1</i></td></tr>
                  <tr class=""><td style="border-top-width: 5px;"><span class="label label-dark-blue">gcc</span></td><td style="border-top-width: 5px;"><i>4.8.2</i></td></tr>
                  <tr class=""><td><span class="label label-dark-blue">clang</span></td><td><i>3.5.0</i></td></tr>
                  <tr class=""><td><span class="label label-dark-blue">cmake</span></td><td><i>2.8.12.2</i></td></tr>
                </tbody>
              </table>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-6 col-xs-6">
              <table class="table">
                <thead>
                  <tr class="active"><th><span class="glyphicon glyphicon-inbox"></span>&nbsp;&nbsp;Package</th><th><span class="glyphicon glyphicon-check"></span>&nbsp;&nbsp;Version</th></tr>
                </thead>
                <tbody>
                  <tr class="danger"><td><span class="label label-green">numpy</span></td><td><i>1.9.2</i></td></tr>
                  <tr class="danger"><td><span class="label label-green">scipy</span></td><td><i>0.15.1</i></td></tr>
                  <tr class="danger"><td><span class="label label-green">matplotlib</span></td><td><i>1.4.3</i></td></tr>
                  <tr class="danger"><td><span class="label label-brown">celery</span></td><td><i>3.1.18</i></td></tr>
                  <tr class="danger"><td><span class="label label-brown">simplejson</span></td><td><i>3.7.3</i></td></tr>
                  <tr class="danger"><td><span class="label label-brown">setuptools</span></td><td><i>17.1.1</i></td></tr>
                  <tr class=""><td><span class="label label-default">pip</span></td><td><i>7.0.3</i></td></tr>
                  <tr class="active"><td style="border-top-width: 5px;"><span class="label label-teal">octave</span></td><td style="border-top-width: 5px;"><i>3.8.1</i></td></tr>
                </tbody>
              </table>
            </div>
          </div>

          <div class="row">
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
              <table class="table">
                <thead>
                  <tr class="active"><th></th><th class="text-right"><span class="glyphicon glyphicon-share"></span>&nbsp;&nbsp;Size (Available / Used)</th><th></th></tr>
                </thead>
                <tbody>
                  <tr><td><span class="glyphicon glyphicon-scale"></span>&nbsp;&nbsp;Disk Space</td><td class="text-right"><i><span style="color:#080;">23G </span>/<span style="color:#f00;"> 7.9G</span></i></td><td></td></tr>
                  <tr><td><span class="glyphicon glyphicon-road"></span>&nbsp;&nbsp;Memory</td><td class="text-right"><i><span style="color:#080;">859M </span>/<span style="color:#f00;"> 132M</span></i></td><td></td></tr>
                </tbody>
              </table>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
              <table class="table">
                <thead>
                  <tr class="active"><th></th><th class="text-right"># of Files</th><th class="text-right"><span class="glyphicon glyphicon-share"></span>&nbsp;&nbsp;Size</th><th></th></tr>
                </thead>
                <tbody>
                  <tr><td><span class="glyphicon glyphicon-floppy-save"></span>&nbsp;&nbsp;Cache Folder</td><td class="text-right"><i>14</i></td><td class="text-right"><i><span style="color:#00f;">356K</span></i></td><td></td></tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
              <p class="well well-sm">
                &nbsp;&nbsp;
                <button id="refresh" target="_blank" rel="noopener noreferrer external" class="btn btn-primary">&nbsp;Refresh&nbsp;</button>
                &nbsp;&nbsp;
                <button id="clear" target="_blank" rel="noopener noreferrer external" class="btn btn-warning">&nbsp;Clean&nbsp;</button>
                &nbsp;&nbsp;&nbsp;&nbsp;
                <b><u>Note:</u></b> only results older than 3 months will be deleted.
              </p>
              <br/>
              <table class="table">
                <thead>
                  <tr class="active"><th><span class="glyphicon glyphicon-compressed"></span>&nbsp;&nbsp;Program</th><th><span class="glyphicon glyphicon-console"></span>&nbsp;&nbsp;Path</th></tr>
                </thead>
                <tbody>
                  <tr class="success"><td><span class="label label-inverse">Primerize</span></td><td><code>/home/ubuntu/Server_Primerize</code></td></tr>
                  <tr class="success"><td><span class="label label-default">NA_thermo</span></td><td><code>/home/ubuntu/NA_Thermo</code></td></tr>
                  <tr class="success"><td><span class="label label-success">RDAT_Kit</span></td><td><code>/home/ubuntu/RDAT_Kit</code></td></tr>
                  <tr class="success"><td><span class="label label-primary">Python</span></td><td><code>/usr/bin/python</code></td></tr>
                  <tr class="success"><td><span class="label label-violet">MATLAB</span></td><td><code>/home/ubuntu/MATLAB/bin/matlab</code></td></tr>
                </tbody>
              </table>     
            </div>
          </div>             
        </div>
      </div>

      <hr/>
      <div class="container-fluid li-warning" role="main">
        <div class="panel-warning" id="sys_ovw">
          <div class="panel-heading">
            <span class="lead">
              <span class="glyphicon glyphicon-bookmark"></span>&nbsp;&nbsp;<b><span class="sec">Section</span> <span class="num">#2</span>: Overview</b>
            </span>
          </div>
          <br/>
          <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
              The <code>Primerize_server</code> repository (<a href="https://github.com/DasLab/Server_Primerize" target="_blank" rel="noopener noreferrer external"><u>https://github.com/DasLab/Server_Primerize</u>&nbsp;&nbsp;<span class="glyphicon glyphicon-new-window"></span></a>) has the following overall structure:
              <br/><br/>
            </div>

            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
              <ul class="lead">
                <li style="list-style-type: none;"><span class="glyphicon glyphicon-grain"></span>&nbsp;&nbsp;<span class="label label-inverse">root</span></li>
                <ul>
                  <li style="list-style-type: disc;"><span class="glyphicon glyphicon-folder-open"></span>&nbsp;&nbsp;<span class="label label-primary">res</span></li>
                  <ul>
                    <li style="list-style-type: circle;"><span class="glyphicon glyphicon-folder-open"></span>&nbsp;&nbsp;<span class="label label-success">css</span></li>
                    <ul>
                      <li><span class="glyphicon glyphicon-file"></span>&nbsp;&nbsp;<span class="label label-default">bootstrap.min.css</span></li>
                      <li>...</li>
                      <li><span class="glyphicon glyphicon-file"></span>&nbsp;&nbsp;<span class="label label-dark-red">theme.css</span></li>
                      <li><span class="glyphicon glyphicon-file"></span>&nbsp;&nbsp;<span class="label label-dark-red">palette.css</span></li>
                    </ul>
                    <li style="list-style-type: circle;"><span class="glyphicon glyphicon-folder-open"></span>&nbsp;&nbsp;<span class="label label-success">js</span></li>
                    <ul>
                      <li><span class="glyphicon glyphicon-file"></span>&nbsp;&nbsp;<span class="label label-default">bootstrap.min.js</span></li>
                      <li><span class="glyphicon glyphicon-file"></span>&nbsp;&nbsp;<span class="label label-default">jquery-1.11.X.js</span></li>
                      <li><span class="glyphicon glyphicon-file"></span>&nbsp;&nbsp;<span class="label label-default">ZeroClipboard.min.js</span></li>
                      <li>...</li>
                      <li><span class="glyphicon glyphicon-file"></span>&nbsp;&nbsp;<span class="label label-orange">_design.js</span></li>
                      <li><span class="glyphicon glyphicon-file"></span>&nbsp;&nbsp;<span class="label label-orange">_util.js</span></li>
                      <li>...</li>
                    </ul>
                    <li style="list-style-type: circle;"><span class="glyphicon glyphicon-folder-open"></span>&nbsp;&nbsp;<span class="label label-success">html</span></li>
                    <ul>
                      <li><span class="glyphicon glyphicon-globe"></span>&nbsp;&nbsp;<span class="label label-violet">_navbar.html</span></li>
                      <li><span class="glyphicon glyphicon-globe"></span>&nbsp;&nbsp;<span class="label label-violet">_404.html</span></li>
                      <li>...</li>
                      <li><span class="glyphicon glyphicon-globe"></span>&nbsp;&nbsp;<span class="label label-violet">index.html</span></li>
                      <li><span class="glyphicon glyphicon-globe"></span>&nbsp;&nbsp;<span class="label label-violet">design.html</span></li>
                      <li>...</li>
                    </ul>
                    <li style="list-style-type: circle;"><span class="glyphicon glyphicon-folder-open"></span>&nbsp;&nbsp;<span class="label label-success">fonts</span></li>
                    <ul>
                      <li><span class="glyphicon glyphicon-text-size"></span>&nbsp;&nbsp;<span class="label label-default">glyphicons-regular.ttf</span></li>
                      <li>...</li>
                    </ul>
                  </ul>
                </ul>
              </ul>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 li-default">
              <ul class="lead">
                <li style="list-style-type: none;"><span class="glyphicon glyphicon-grain"></span>&nbsp;&nbsp;<span class="label label-inverse">root</span></li>
                <ul>
                  <li style="list-style-type: disc;"><span class="glyphicon glyphicon-folder-open"></span>&nbsp;&nbsp;<span class="label label-primary">res</span></li>
                  <ul>
                    <li style="list-style-type: circle;"><span class="glyphicon glyphicon-folder-open"></span>&nbsp;&nbsp;<span class="label label-success">images</span></li>
                    <ul>
                      <li><span class="glyphicon glyphicon-folder-open"></span>&nbsp;&nbsp;<span class="label label-default">doc</span></li>
                      <ul>
                        <li><span class="glyphicon glyphicon-picture"></span>&nbsp;&nbsp;<span class="label label-info">PCR_gel.png</span></li>
                        <li>...</li>
                      </ul>
                      <li><span class="glyphicon glyphicon-picture"></span>&nbsp;&nbsp;<span class="label label-info">bg_rna.png</span></li>
                      <li><span class="glyphicon glyphicon-picture"></span>&nbsp;&nbsp;<span class="label label-info">fg_load.gif</span></li>
                      <li><span class="glyphicon glyphicon-picture"></span>&nbsp;&nbsp;<span class="label label-info">logo_primerize.png</span></li>
                      <li>...</li>
                    </ul>
                  </ul>
                  <li style="list-style-type: disc;"><span class="glyphicon glyphicon-folder-open"></span>&nbsp;&nbsp;<span class="label label-primary">src</span></li>
                  <ul>
                    <li style="list-style-type: circle;"><span class="glyphicon glyphicon-compressed"></span>&nbsp;&nbsp;<span class="label label-green">primerize_release.zip</span></li>
                    <li style="list-style-type: circle;"><span class="glyphicon glyphicon-list-alt"></span>&nbsp;&nbsp;<span class="label label-green">usr_tab.csv</span></li>
                    <li style="list-style-type: circle;"><span class="glyphicon glyphicon-scale"></span>&nbsp;&nbsp;<span class="label label-default">sys_ver.txt</span></li>
                    <li style="list-style-type: circle;"><span class="glyphicon glyphicon-scale"></span>&nbsp;&nbsp;<span class="label label-default">sys_hist.txt</span></li>
                    <li style="list-style-type: circle;"><span class="glyphicon glyphicon-hourglass"></span>&nbsp;&nbsp;<span class="label label-default">command.sh</span></li>
                  </ul>
                  <li style="list-style-type: disc;"><span class="glyphicon glyphicon-floppy-save"></span>&nbsp;&nbsp;<span class="label label-warning">cache</span></li>
                  <ul>
                    <li style="list-style-type: circle;">...</li>
                  </ul>
                  <li style="list-style-type: disc;"><span class="glyphicon glyphicon-comment"></span>&nbsp;&nbsp;<span class="label label-danger">const.py</span></li>
                  <li style="list-style-type: disc;"><span class="glyphicon glyphicon-comment"></span>&nbsp;&nbsp;<span class="label label-danger">config.py</span></li>
                  <li style="list-style-type: disc;"><span class="glyphicon glyphicon-comment"></span>&nbsp;&nbsp;<span class="label label-danger">helper.py</span></li>
                  <li style="list-style-type: disc;"><span class="glyphicon glyphicon-comment"></span>&nbsp;&nbsp;<span class="label label-danger">primerize.py</span></li>
                  <li style="list-style-type: disc;"><span class="glyphicon glyphicon-comment"></span>&nbsp;&nbsp;<span class="label label-danger">run_server.py</span></li>
                  <li style="list-style-type: disc;"><span class="glyphicon glyphicon-alert"></span>&nbsp;&nbsp;<span class="label label-default">robots.txt</span></li>
                  <li style="list-style-type: disc;"><span class="glyphicon glyphicon-eye-close"></span>&nbsp;&nbsp;<span class="label label-default">.gitignore</span></li>
                  <li style="list-style-type: disc;"><span class="glyphicon glyphicon-file"></span>&nbsp;&nbsp;<span class="label label-default">LICENSE.md</span></li>
                  <li style="list-style-type: disc;"><span class="glyphicon glyphicon-file"></span>&nbsp;&nbsp;<span class="label label-default">README.md</span></li>
                </ul>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <hr/>
      <div class="container-fluid li-primary" role="main">
        <div class="panel-primary" id="sys_bked">
          <div class="panel-heading">
            <span class="lead"><span class="glyphicon glyphicon-hdd"></span>&nbsp;&nbsp;<b><span class="sec">Section</span> <span class="num">#3</span>: Back End</b></span>
          </div>
          <br/>
          <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
              <p>Primerize server is based on <b><a href="http://www.cherrypy.org/" target="_blank" rel="noopener noreferrer external">CherryPy&nbsp;&nbsp;<span class="glyphicon glyphicon-new-window"></span></a></b> framework. For basic concepts and documentation of CherryPy, please read <a href="http://cherrypy.readthedocs.org/" target="_blank" rel="noopener noreferrer external"><u>here</u>&nbsp;&nbsp;<span class="glyphicon glyphicon-new-window"></span></a>.
              
              <div class="row">
                <div class="col-lg-2 col-md-2 col-sm-3 col-xs-3">
                  <p class="lead" id="sys_bked_const"><span class="label label-danger">const.py</span></p>
                </div>
                <div class="col-lg-10 col-md-10 col-sm-9 col-xs-9">
                  <code>const.py</code> stores <b><u>constants</u></b>, including:
                  <ul>
                    <li>For CherryPy framework, <code>ADMIN</code> information (<mark>/admin</mark> login and notification email) and <code>EMAIL</code> gmail account for sending out emails.</li>
                    <li>Default parameters for <code>design_primers()</code>, e.g. <code>DEF_MIN_TM</code>.</li>
                    <li>Default sequences for <code>P4P6</code> and <code>T7</code>.</li>
                    <li><code>MEDIA_DIR</code> for relative path, <code>PATH</code> information about all static <mark>HTML</mark> files. This variable is the 'master' reportoire of all <code>render_to_response()</code> calls, special pages(e.g. <mark>404</mark> and <mark>_navbar</mark>), <mark>js</mark> and <mark>css</mark> paths are also loaded from here. The <mark>navbar, footer, modal</mark> HTML codes are loaded once at initiation by <code>load_html_parts()</code>.</li>
                    <li>Default parameter <code>JOB_KEEP_EXPIRE</code> for the result cache life, set to <kbd>90</kbd> days.</li>
                    <li>Google Analytics <mark>js</mark> tracker code in <code>GA_TRACKER</code>.</li>
                  </ul>
                </div>
              </div>

              <hr/>
              <div class="row">
                <div class="col-lg-2 col-md-2 col-sm-3 col-xs-3">
                  <p class="lead" id="sys_bked_config"><span class="label label-danger">config.py</span></p>
                </div>
                <div class="col-lg-10 col-md-10 col-sm-9 col-xs-9">
                  <code>config.py</code> handles CherryPy <b><u>configuration</u></b>, including:
                  <ul>
                    <li><abbr title="">staticfile</abbr> and <abbr title="">staticdir</abbr> config.</li>
                    <ul>
                      <li><mark>/src/primerize_release.zip</mark> (for download), <mark>/LICENSE.md</mark> (for license display), and <mark>/robots.txt</mark> (to shield off bad crawlers) need to be accessible.</li>
                    </ul>
                    <li><abbr title="">log</abbr> and <abbr title="">error_page</abbr> handlers.</li>
                    <ul>
                      <li>Errors are handled by <code>error_page_403()</code>, <code>error_page_404()</code>, and <code>error_page_500()</code> functions. <b>Traceback</b> and <b>client</b> infomaton are recorded and emailed to admin.</li>
                    </ul>
                    <li><mark>/admin</mark> authentification and <abbr title="">secureheader</abbr>.</li>
                    <ul>
                      <li><mark>/admin</mark> (this page) requires autherization defined by <code>ADMIN['login']</code>.</li>
                      <li>Primerize uses <abbr title="">secureheader</abbr> communication by <code>secureheaders()</code>.</li>
                    </ul>
                    <li><abbr title="">socket</abbr> information and <abbr title="">ip</abbr>. <abbr title="">thread_pool</abbr> is set to <kbd>100</kbd> for AWS health check. Other parameters are set according to the run mode:</li>
                    <ul>
                      <li>For test purposes (<mark>dev</mark>), the <abbr title="">ip</abbr> is <mark>127.0.0.1</mark> ande <abbr title="">server_state</abbr> is <mark>dev</mark>.</li>
                      <li>For <mark>release</mark> (actual deployment for public at AWS), the <abbr title="">ip</abbr> is <mark>0.0.0.0</mark> and <abbr title="">server_state</abbr> is <mark>release</mark>. The <abbr title="">ip</abbr> and <abbr title="">port</abbr> forwarding is handled by AWS (see below).</li>
                      <li>The <abbr title="">server_state</abbr> custom flag is for the use of 500 error handler to determine whether to send the admin email notification.</li>
                  </ul>
                </div>
              </div>

              <hr/>
              <div class="row">
                <div class="col-lg-2 col-md-2 col-sm-3 col-xs-3">
                  <p class="lead" id="sys_bked_helper"><span class="label label-danger">helper.py</span></p>
                </div>
                <div class="col-lg-10 col-md-10 col-sm-9 col-xs-9">
                  <code>helper.py</code> is a collection of <b><u>helper</u></b> functions for <code>run_server.py</code>, including:
                  <ul>
                    <li><code>load_html()</code> is a function for loading <abbr title="">static</abbr> HTML files from <mark>/res/html/</mark>. It loads and replaces the <mark>_navbar.html</mark> (for shared navigation bar), <mark>_footer.html</mark> (for shared footer), <mark>_demo.html</mark> (for DEMO modal window), <mark>_modal.html</mark> (for job modal window), and replaces placeholder script <abbr title="">class</abbr> of all <mark>js</mark> and <mark>css</mark> <abbr title="">static</abbr> files. It also appends the <b>Google Analytics</b> <mark>js</mark> tracker script.</li>
                    <ul>
                      <li><b>NOTE</b>: You should change <abbr title="">static</abbr> <mark>html, js, css</mark> files here, not anywhere else. Follow the <abbr title="">class</abbr> definitions in the <mark>html</mark>, and use the shared <mark>navbar, footer, modal</mark> this way.</li>
                      <li><b>NOTE</b>: The <mark>navbar, footer, modal</mark> HTML codes are loaded once at initiation by <code>load_html_parts()</code> from <code>const.py</code>.</li>
                    </ul>
                    <li><code>is_valid_name()</code> and <code>is_valid_email()</code> are functions for validification of source code download form info.</li>
                    <li><code>is_valid_sequence()</code> and <code>is_t7_present()</code> are functions for <code>design_primers()</code> input checks.</li>
                    <li><code>get_first_part_of_page()</code> reads in the default <mark>/res/html/design_1d.html</mark> and fills in the user form, and this will be used in the result return pages rendering.</li>
                    <li><code>create_wait_html()</code>, <code>create_err_html()</code> and <code>premature_return()</code> all renders response HTML pages, according to run status. They all use <code>create_res_html()</code> for file handling. Input parameters and return messages are passed from main function <code>design_primers()</code>.</li>
                    <li><code>get_full_sys_stat()</code> is responsible for <mark>/admin</mark> page system versions. It makes multiple <code>subprocess.Popen()</code> calls to collect version information, and stores it in <mark>/src/sys_ver.txt</mark> for parsing when loaded with <code>admin</code> from <code>run_server.py</code>. <code>load_history()</code> is responsible for <mark>/about</mark> page history panels. It reads <mark>src/sys_hist.txt</mark>.</li>
                    <li><code>send_email_notice()</code> send <b>traceback</b> information to <code>ADMIN</code> when error occur in <mark>release</mark> mode.</li>
                  </ul>
                </div>
              </div>

              <hr/>
              <div class="row">
                <div class="col-lg-2 col-md-2 col-sm-3 col-xs-3">
                  <p class="lead" id="sys_bked_prm"><span class="label label-danger">primerize.py</span></p>
                </div>
                <div class="col-lg-10 col-md-10 col-sm-9 col-xs-9">
                  <code>primerize.py</code> is the <b><u>main</u></b> script for Primerize functions. It is called by <code>run_server.py</code> to perform calculations and prepare results. Functions for <b>1D</b> primer design is <code>design_primers()</code>:
                  <hr/>

                  <p id="sys_bked_prm_1d" class="lead"><span class="label label-warning">design_primers()</span></p>
                  <ul>
                    <li>The function receives input from form submission of the <mark>/design_1d</mark> page, as well as the <mark>javascript</mark> generated <span class="label label-violet">JOB_ID</span>.</li>
                    <li>First, the function concatenates the input <mark>sequence</mark> into one string, and checks for the validity of input (length, nucleotides identity, advanced option type and range). If standars are not met, an error page will be returned by calling <code>premature_return()</code>. Otherwise, prepare a placeholder waiting page by <code>create_wait_html()</code> in case of long runs.</li>
                    <li>Second, the function forks a <mark>MATLAB</mark> session for calculation using <code>subprocess.check_output()</code>. The call is timed and catches exception. If errors occur on the MATLAB part, it will prepare a 500 page by <code>create_err_html()</code>, and also the 500 fires <code>ADMIN</code> email notice.</li>
                    <ul>
                      <li><b>NOTE</b>: MATLAB call is using parameters <code>-nojvm</code>, <code>-nodisplay</code>, <code>-nosplash</code>, and <code>-r</code>. Those are explained by <code>matlab -help</code>.</li>
                    </ul>
                    <li>Third, the returned results are stripped by <mark>\n</mark>. For cases of <abbr title="">'no solution found'</abbr>, a line starting with <mark>?</mark> is captured and the user is noticed for the failure. Next, the results are parsed and rendered in HTML. </li>
                    <ul>
                      <li>Sections of <abbr title="">warning, primers, assembly</abbr> are delimited with <mark>#</mark> lines.</li>
                      <li>It first make the <abbr title="">WARNING</abbr> field with <i>mis-prime</i> information, as well as download links and timer. Lines of <abbr title="">WARNING</abbr> start with <mark>@</mark>, and perfect cases will make the <abbr title="">SUCCESS</abbr> field instead.</li>
                      <li>Then, primers are rendered into a <mark>table</mark>, with <span class="label label-info">F</span>/<span class="label label-danger">R</span> coloring.</li>
                      <li>Last, the assembly lines also take advantage of starting symbols: <mark>~</mark> for <i>sense</i> strand, <mark>=</mark> for <i>anti-sense</i> strand, <mark>^</mark> for forward primers, and <mark>!</mark> for reverse primers. Each line is parsed and color-coded, while <abbr title="">annealing temperature</abbr> and <abbr title="">primer direction</abbr> are highlighted.</li>
                    </ul>
                    <li>Last, the output is written to plain text files, together with HTML <mark>/cache</mark> overwritten. Also the <mark>T7_CHECK</mark> section is inserted. The browser is redirected to <code>result()</code> as return.</li>
                    <ul>
                      <li><b>NOTE</b>: Cached files are <mark>cache/result_0123456789abcdef.html</mark> and <mark>cache/result_0123456789abcdef.txt</mark>. HTML file cache saves time for result retrieval.</li>
                    </ul>

                </div>
              </div>


              <hr/>
              <div class="row">
                <div class="col-lg-2 col-md-2 col-sm-3 col-xs-3">
                  <p class="lead" id="sys_bked_runserver"><span class="label label-danger">run_server.py</span></p>
                </div>
                <div class="col-lg-10 col-md-10 col-sm-9 col-xs-9">
                  <code>run_server.py</code> is the <b><u>main</u></b> script for the CherryPy framework. It runs the server in either <mark>dev</mark> or <mark>release</mark> mode by <code>main()</code>. The body is in a <code>Root</code> <mark>class</mark>:
                  <ul id="sys_bked_runserver_func">
                    <li><code>home()</code>, <code>tutorial()</code>, <code>protocol()</code>, <code>license()</code> and <code>about()</code> exposes the corresponding page links.</li>
                    <ul>
                      <li><b>NOTE</b>: Multiple <abbr title="">alias</abbr> are defined by the <code>@cherrypy.expose</code> line. This is handy to direct different URLs to same page.</li>
                    </ul>
                    <li><code>download()</code> exposes the blank page for download form, while <code>submit_download()</code> returns the form submission result depending on the input. They share the same HTML template (<mark>/res/html/download.html</mark>) while loading different <mark>js</mark> files. The <mark>js</mark> files renders the form and return message.</li>
                    <li><code>admin()</code> renders this admin page. <code>get_sys()</code> and <code>cleanup_old()</code> are callables from <mark>/admin</mark> for system maintenance.</li>
                    <li><code>demo_404()</code>, <code>demo_500()</code>, <code>demo_1d_wait()</code>, <code>demo_1d_fail()</code>, <code>demo_1d_error()</code> and <code>error()</code> are remnant functions in response to paper review to illustrate status and error handling.</li>
                    <li><code>ping_test()</code> is an empty <abbr title="">200</abbr> response for <span class="label label-info">AWS</span> <abbr title="">load balancer</abbr> <mark>PING</mark> health check.</li>
                    <br/>
                    <li><code>result()</code> performs the result retrieval for a particular <span class="label label-violet">JOB_ID</span>, or returns <mark>404</mark> page.</li>
                    <li><code>demo_1d_P4P6()</code> calls a DEMO job using constants from <code>const.py</code>. <code>test_random()</code> is a remnant function for testing of a random sequence of length <kbd>500</kbd>, for paper review.</li>
                    <li><code>design_1d()</code> exposes the blank page for 1D design page, while <code>design_primers()</code> (see above) performs the calculation and returns result.</li>
                  </ul>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>

      <hr/>
      <div class="container-fluid li-danger" role="main">
        <div class="panel-danger" id="sys_fted">
          <div class="panel-heading">
            <span class="lead"><span class="glyphicon glyphicon-refresh"></span>&nbsp;&nbsp;<b><span class="sec">Section</span> <span class="num">#4</span>: Front End</b></span>
          </div>
          <br/>
          <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
              <div class="row">
                <div class="col-lg-2 col-md-2 col-sm-3 col-xs-3">
                  <p class="lead" id="sys_fted_html"><span class="label label-success">res/html</span></p>
                </div>
                <div class="col-lg-10 col-md-10 col-sm-9 col-xs-9">
                  This is the sub-directory of all <b><u>HTML</u></b> files.
                  <ul>
                    <li><code>_403.html, _404.html, _500.html</code> are pages for corresponding <abbr title="">HTTP</abbr> error response.</li>
                    <li><code>_navbar.html, _footer.html, _modal.html, _demo.html</code> are HTML parts that are shared across all pages. They are loaded by <code>load_html_parts()</code> at startup, and replace the corresponding <abbr title="">placeholders</abbr> (<mark><u>&nbsp;&nbsp;&nbsp;&nbsp;</u>NAVBAR<u>&nbsp;&nbsp;&nbsp;&nbsp;</u>, <u>&nbsp;&nbsp;&nbsp;&nbsp;</u>FOOTER<u>&nbsp;&nbsp;&nbsp;&nbsp;</u>, <u>&nbsp;&nbsp;&nbsp;&nbsp;</u>MODAL<u>&nbsp;&nbsp;&nbsp;&nbsp;</u>, <u>&nbsp;&nbsp;&nbsp;&nbsp;</u>DEMO<u>&nbsp;&nbsp;&nbsp;&nbsp;</u></mark>).</li>
                    <li>Files with name starting with a letter are main body for each page. Their <mark>css, js</mark> resources are loaded by <code>helper.py</code> defined by <code>PATH</code> in <code>const.py</code>. This is for a centralized system that is easy to update and maintain.</li>
                    <li><code>tutorial.html</code> and <code>protocol.html</code> are written by hand, and need to be updated manually when there is a change for the targeted pages.</li>
                    <li>Again, <b>all</b> HTML pages are governed by <code>PATH</code> in <code>const.py</code> as a master list for all paths.</li>
                    <li>For <code>design_1d.html</code>, <code>download.html</code>, <code>about.html</code> and <code>admin.html</code>, they use <abbr title="">placeholder</abbr> strings (e.g. <mark><u>&nbsp;&nbsp;&nbsp;&nbsp;</u>JOB_ID<u>&nbsp;&nbsp;&nbsp;&nbsp;</u></mark>) that are filled by <code>run_server.py</code>.
                  </ul>
                </div>
              </div>

              <hr/>
              <div class="row">
                <div class="col-lg-2 col-md-2 col-sm-3 col-xs-3">
                  <p class="lead" id="sys_fted_js"><span class="label label-success">res/js</span></p>
                </div>
                <div class="col-lg-10 col-md-10 col-sm-9 col-xs-9">
                  This is the sub-directory for all <b><u>javascript</u></b> scripts.
                  <ul>
                    <li>Libraries of <span class="label label-orange">jQuery</span>, <span class="label label-dark-red">Bootstrap</span> and <span class="label label-default">ZeroClipboard</span> are used and stored. For <span class="label label-orange">jQuery</span>, keep the version string in the filename, as the <code>get_jquery_ver()</code> from <code>const.py</code> figures out and points to the filename for each HTML page.</li>
                    <li><code>_util.js</code> is loaded by <b>all</b> HTML pages. It handles the 'master' list of path for <b><u>images</u></b>, defined by (e.g. <mark>path_logo_primerize</mark>). It also handles the <mark>navbar</mark> highlighting for each page, and relative links (e.g. <mark>path_home</mark>). Additionally, this file fills in the current year for the <mark>footer</mark>, document title and icons, as well as enabling <span class="label label-dark-red">Bootstrap</span> dropdowns and tooltops.</li>
                    <ul>
                      <li><b>NOTE</b>: In <b>all</b> HTML files, <b><u>DO NOT</u></b> hardcode URLS in <code>href=""</code>, instead, use the defined classes in <code>_util.js</code>.</li>
                      <li><b>NOTE</b>: In <b>all</b> HTML files, <b><u>DO NOT</u></b> hardcode links for <abbr title="">static</abbr> images, instead, use the defined classes here.</li>
                    </ul>
                    <li><code>_design_1d.js</code> handles <mark>javascript</mark> behaviors for the <mark>/design_1d</mark> page.</li>
                    <ul>
                      <li><b>NOTE</b>: It includes a vestigal control for a checkbox of <mark>License Agreement</mark>. This is no longer in use. Also, there is a special treatment for <abbr title="">Safari</abbr> browser for the modal window display timeout. This is an inelegant solution for the problem that Safari fails to display the modal window in parallel with form submission. The solution is to introduce a delay in form submission to win time for the modal window.</li>
                      <li><b>NOTE</b>: It generates a random <span class="label label-violet">JOB_ID</span> on the page, and it was submitted along with the form to <code>design_primers()</code>. This is a compromise for showing the <span class="label label-violet">JOB_ID</span> on the page while processing.</li>
                    </ul>
                    <li>The other page-specific <mark>js</mark> files all start with <mark>_</mark>. Some are shared by multiple pages.</li>
                  </ul>
                </div>
              </div>

              <hr/>
              <div class="row">
                <div class="col-lg-2 col-md-2 col-sm-3 col-xs-3">
                  <p class="lead" id="sys_fted_misc">
                    <span class="label label-success">res/css</span>
                    <br/>
                    <span class="label label-success">res/images</span>
                    <br/>
                    <span class="label label-success">res/fonts</span>
                  </p>
                </div>
                <div class="col-lg-10 col-md-10 col-sm-9 col-xs-9">
                  These are sub-directories hosting all <b><u>css, images, fonts</u></b> files.
                  <ul>
                    <li><span class="label label-success">res/css</span> hosts <span class="label label-dark-red">Bootstrap</span> style spreadsheets, as well as custom files <mark>theme.css</mark> and <mark>palette.css</mark>. <mark>palette.css</mark> specifies the custom color-scheme used by this website, e.g. (<span class="label label-info">label label-info</span>).</li>
                    <li><span class="label label-success">res/fonts</span> hosts <span class="label label-dark-red">Bootstrap</span> <b>Glyphicons</b>. The relative path between <mark>res/fonts</mark> and <mark>res/js</mark> should not be altered.</li>
                    <li><span class="label label-success">res/images</span> hosts all <abbr title="">static</abbr> image files. Their loading path is mastered by <code>_util.js</code>. Images for the <mark>/protocol</mark> are stored in <mark>res/images/docs</mark>.</li>
                  </ul>
                </div>
              </div>

              <hr/>
              <div class="row">
                <div class="col-lg-2 col-md-2 col-sm-3 col-xs-3">
                  <p class="lead" id="sys_fted_src"><span class="label label-primary">src</span></p>
                </div>
                <div class="col-lg-10 col-md-10 col-sm-9 col-xs-9">
                  This is the sub-directory for all <b><u>other</u></b> files.
                  <ul>
                    <li><span class="label label-green">primerize_release.zip</span> is the download source for the <b>Primerize</b> repository.</li>
                    <li><span class="label label-green">usr_tab.csv</span> is the internal list of user download record. It is updated by the <code>submit_download()</code> expose.</li>
                    <li><span class="label label-default">command.sh</span> archives the command for running the server. It shows commands for <mark>screen</mark> operations.</li>
                    <ul>
                      <li><b>NOTE</b>: the <code>port forwarding</code> is no longer in use. <mark>AWS load balancer</mark> handles it.</li>
                    </ul>
                    <li><span class="label label-default">sys_ver.txt</span> is a text file stores the output for <code>get_full_sys_stat()</code> for the Dashboard on this page.</li>
                    <li><span class="label label-default">sys_hist.txt</span> is a text file stores the history items for <code>load_history()</code> for the <mark>/about</mark> page. It is manually updated by the admin, following this format:</li>
                    <ul>
                      <li>Start a line with <mark>#$#</mark>, followed by <abbr title="">date</abbr> in format of <mark>mmm dd yyyy</mark>.</li>
                      <li>Separate the <abbr title="">date</abbr> and <abbr title="">event</abbr> with <mark>#|#</mark>.</li>
                      <li>HTML codes in the <abbr title="">event</abbr> field are accepted. No empty lines. Prepend new entries.</li>
                    </ul>
                  </ul>
                </div>
              </div>

              <hr/>
              <div class="row">
                <div class="col-lg-2 col-md-2 col-sm-3 col-xs-3">
                  <p class="lead"><span class="label label-inverse">/</span></p>
                </div>
                <div class="col-lg-10 col-md-10 col-sm-9 col-xs-9">
                  This is the <b><u>root</u></b> directory.
                  <ul>
                    <li><span class="label label-default">README.md</span>: markdown file for Primerize_server repository.</li>
                    <li><span class="label label-default">LICENSE.md</span>: license file for Primerize_server repository. It is also loaded by <mark>res/js/_license.js</mark> for <mark>/license</mark> page.</li>
                    <li><span class="label label-default">.gitignore</span>: list of files ignored by Primerize_server repository.</li>
                    <li><span class="label label-dark-blue">log_access.log</span> and <span class="label label-dark-blue">log_error.log</span>: log files by CherryPy.</li>
                    <li><span class="label label-default">robots.txt</span>: (see below).</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <hr/>
      <div class="container-fluid li-default" role="main">
        <div class="panel-default" id="sys_misc">
          <div class="panel-heading">
            <span class="lead"><span class="glyphicon glyphicon-cog"></span>&nbsp;&nbsp;<b><span class="sec">Section</span> <span class="num">#5</span>: Miscellaneous</b></span>
          </div>
          <br/>
          <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
              <div class="row">
                <div class="col-lg-2 col-md-2 col-sm-3 col-xs-3">
                  <p class="lead" id="sys_misc_aws">
                    <span class="glyphicon glyphicon-text-background"></span>
                    <br/>
                    <span class="label label-info">Amazon</span>
                    <span class="label label-info">Web</span>
                    <span class="label label-info">Service</span>
                  </p>
                </div>
                <div class="col-lg-10 col-md-10 col-sm-9 col-xs-9">
                  <p>The Primerize server is running as an <b><code>EC2 t2.micro</code></b> instance at <a href="http://aws.amazon.com/" target="_blank" rel="noopener noreferrer external">Amazon Web Service&nbsp;&nbsp;<span class="glyphicon glyphicon-new-window"></span></a>, under user account <abbr title="">daslabsu@gmail.com</abbr> (<i>password</i> is the same as <code>ADMIN</code> login).</p>
                  <p>The Primerize server is using a <mark>32 GiB</mark> <code>gp2</code> (General Purpose SSD) disk, <mark>volume ID</mark> is <kbd>vol-eced40fc</kbd>.</p>
                  <br/>
                  <p>The instance <mark>ID</mark> is <kbd>i-dd72fe2a</kbd>, in the zone of <mark>us-west-2b</mark>.</p>
                  <p>The private <mark>IP</mark> is <kbd>172.31.31.41</kbd> and private <mark>DNS</mark> is <kbd>ip-172-31-31-41.us-west-2.compute.internal</kbd>.</p>
                  <p>The public <mark>IP</mark> is <kbd>52.25.196.60</kbd> and public <mark>DNS</mark> is <kbd>ec2-52-25-196-60.us-west-2.compute.amazonaws.com</kbd>.</p>
                  <p>You can access the server by <code>ssh</code> using the <span class="label label-warning">amazon.pem</span>:</p>
                  <pre>ssh -i amazon.pem ubuntu@52.25.196.60</pre>
                  <p>The 'regular' <code>ssh</code> command won't work:</p>
                  <pre><strike>ssh daslab@primerize.stanford.edu</strike></pre>
                  <br/>
                  <p>For permanant <mark>IP</mark>, the Primerize server uses a <abbr title="">load balancer</abbr>, with <mark>DNS</mark> name <kbd style="color:#ff5c2b;">primerize-balancer-1516867550.us-west-2.elb.amazonaws.com</kbd>. This <mark>DNS</mark> is bound to stanford DNS for the server <mark>IP</mark> <kbd style="color:#50cc32;">54.69.129.47</kbd> with <mark>DNS</mark> <kbd>primerize.stanford.edu</kbd>. The old <mark>IP</mark> <kbd>171.65.23.206</kbd> is no longer assigned to us.</p>
                  <p>The <abbr title="">load balancer</abbr> forwards <mark>port</mark> <kbd>80</kbd> (HTTP) to <kbd>8080</kbd>, which is the port the <span class="label label-primary">Python</span> is running on. The instance is applied with a <mark>Security Group</mark> that opens both TCP <mark>ports</mark> at <kbd>0.0.0.0</kbd>.</p>
                  <p>The <abbr title="">load balancer</abbr> uses <mark>PING</mark> as health check monitoring. The <mark>PING</mark> target is set to <code>/ping_test</code>, which is defined in <code>run_server.py</code> exclusively for this purpose. Currently, <abbr title="">Timeout</abbr> is set to <kbd>15</kbd> s and <abbr title="">Interval</abbr> as <kbd>300</kbd> s.</p>
                  <br/>
                  <p>The <mark>IP/DNS</mark> flow is as:</p>
                  <p class="text-center"><code>python run_server.py release</code> @ <kbd>0.0.0.0<span style="color:#ff0;">:8080</span></kbd></p>
                  <div class="row">
                    <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5"><span class="glyphicon glyphicon-arrow-down pull-right"></span></div>
                    <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7"><p>HTTP Security Group</p></div>
                  </div>
                  <p class="text-center"><kbd>ec2-52-25-196-60.us-west-2.compute.amazonaws.com<span style="color:#ff0;">:8080</span></kbd></p>
                  <div class="row">
                    <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5"><span class="glyphicon glyphicon-arrow-down pull-right"></span></div>
                    <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7"><p>Load Balancer Port Forwarding</p></div>
                  </div>
                  <p class="text-center"><kbd style="color:#ff5c2b;">primerize-balancer-1516867550.us-west-2.elb.amazonaws.com<span style="color:#ff0;">:80</span></kbd></p>
                  <div class="row">
                    <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5"><span class="glyphicon glyphicon-sort pull-right"></span></div>
                    <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7"><p>Stanford IP/DNS</p></div>
                  </div>
                  <p class="text-center"><kbd style="color:#50cc32;">54.69.129.47</kbd> <kbd>primerize.stanford.edu</kbd></p>
                </div>
              </div>

              <hr/>
              <div class="row">
                <div class="col-lg-2 col-md-2 col-sm-3 col-xs-3">
                  <p class="lead" id="sys_misc_ga">
                    <span class="glyphicon glyphicon-signal"></span>
                    <br/>
                    <span class="label label-info">Google</span>
                    <span class="label label-info">Analytics</span>
                  </p>
                </div>
                <div class="col-lg-10 col-md-10 col-sm-9 col-xs-9">
                  <p>The <a href="http://www.google.com/analytics/" tareget="_blank">Google Analytics&nbsp;&nbsp;<span class="glyphicon glyphicon-new-window"></a> tracker ID is <kbd style="color:#0ff;">UA-36037648-2</kbd>. You can access the statistics via user account <abbr title="">daslabsu@gmail.com</abbr> (<i>password</i> is <b>NOT</b> the same as <code>ADMIN</code> login; it is recorded on the lab <u>iMac</u>).</p>
                  <p>The tracker ID <mark>js</mark> code is defined as <code>GA_TRACKER</code> in <code>const.py</code>.</p>

                </div>
              </div>

              <hr/>
              <div class="row">
                <div class="col-lg-2 col-md-2 col-sm-3 col-xs-3">
                  <p class="lead" id="sys_misc_repo">
                    <span class="glyphicon glyphicon-download-alt"></span>
                    <br/>
                    <span class="label label-info">Repository</span>
                  </p>
                </div>
                <div class="col-lg-10 col-md-10 col-sm-9 col-xs-9">
                  The repositories for Primerize_server are mostly private. Using a valid login, you can access them by:

<pre>git clone https://github.com/DasLab/Server_Primerize.git
git clone https://github.com/DasLab/Primerize.git
git clone https://github.com/ribokit/RDATKit.git</pre>
                  
                  <p>For a complete new setup, you will need to configure RDATKit following <a href="" target="_blank" rel="noopener noreferrer external">this instruction&nbsp;&nbsp;<span class="glyphicon glyphicon-new-window"></span></a>. Also, the <code>NA_Thermo</code> (Primerize) should be added to <mark>MATLAB</mark> path. [For current server, all has been done.]</p>
                  <p>The current server has the following overall structure:</p>
                  <div class="row">
                    <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
                      <ul>
                        <li style="list-style-type: none;"><span class="glyphicon glyphicon-user"></span>&nbsp;&nbsp;<span class="label label-info">~</span></li>
                        <ul>
                          <li style="list-style-type: disc;"><span class="glyphicon glyphicon-folder-open"></span>&nbsp;&nbsp;<span class="label label-violet">MATLAB</span></li>
                          <li style="list-style-type: disc;"><span class="glyphicon glyphicon-folder-open"></span>&nbsp;&nbsp;<span class="label label-default">NA_Thermo</span></li>
                          <li style="list-style-type: disc;"><span class="glyphicon glyphicon-folder-open"></span>&nbsp;&nbsp;<span class="label label-primary">Server_Primerize</span></li>
                          <li style="list-style-type: disc;"><span class="glyphicon glyphicon-folder-open"></span>&nbsp;&nbsp;<span class="label label-success">RDAT_Kit</span></li>
                          <li style="list-style-type: disc;"><span class="glyphicon glyphicon-folder-open"></span>&nbsp;&nbsp;<span class="label label-danger">RNAstructure</span></li>
                          <li style="list-style-type: disc;"><span class="glyphicon glyphicon-folder-open"></span>&nbsp;&nbsp;<span class="label label-danger">ViennaRNA</span></li>
                          <li style="list-style-type: disc;"><span class="glyphicon glyphicon-cog"></span>&nbsp;&nbsp;<span class="label label-inverse">.bash_profile</span></li>
                          <li style="list-style-type: disc;"><span class="glyphicon glyphicon-list-alt"></span>&nbsp;&nbsp;<span class="label label-inverse">.ver_src</span></li>
                          <li style="list-style-type: disc;"><span class="glyphicon glyphicon-list-alt"></span>&nbsp;&nbsp;<span class="label label-inverse">.ver_txt</span></li>
                          <li style="list-style-type: disc;"><span class="glyphicon glyphicon-credit-card"></span>&nbsp;&nbsp;<span class="label label-warning">amazon.pem</span></li>
                          <li style="list-style-type: disc;"><span class="glyphicon glyphicon-compressed"></span>&nbsp;&nbsp;<span class="label label-danger">VARNAv3-92-src.jar</span></li>
                        </ul>
                      </ul>
                    </div>
                    <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7">
                      <ul>
                        <li style="list-style-type: none;">&nbsp;</li>
                        <ul>
                          <li style="list-style-type: none;"><i>MATLAB install</i></li>
                          <li style="list-style-type: none;"><i>Primerize MATLAB code</i></li>
                          <li style="list-style-type: none;"><i>Server_Primerize root</i></li>
                          <li style="list-style-type: none;"><i>RDAT_Kit install</i></li>
                          <li style="list-style-type: none;"><i>RNAstructure install<span class="pull-right">(for future prediction use)</span></i></li>
                          <li style="list-style-type: none;"><i>ViennaRNA install<span class="pull-right">(for future prediction use)</span></i></li>
                          <li style="list-style-type: none;"><i>&nbsp;<span class="pull-right">.bash_profile configuration</span></i></li>
                          <li style="list-style-type: none;"><i>&nbsp;<span class="pull-right">system version display source</span></i></li>
                          <li style="list-style-type: none;"><i>&nbsp;<span class="pull-right">system version display cache</span></i></li>
                          <li style="list-style-type: none;"><i>AWS certificate</i></li>
                          <li style="list-style-type: none;"><i>VARNA source<span class="pull-right">(for future prediction use)</span></i></li>
                        </ul>
                      </ul>                        
                    </div>
                  </div>
                </div>
              </div>
              
              <hr/>
              <div class="row">
                <div class="col-lg-2 col-md-2 col-sm-3 col-xs-3">
                  <p class="lead" id="sys_misc_run">
                    <span class="glyphicon glyphicon-hourglass"></span>
                    <br/>
                    <span class="label label-info">Run</span>
                    <span class="label label-info">Server</span>
                  </p>
                </div>
                <div class="col-lg-10 col-md-10 col-sm-9 col-xs-9">
                  <p>To run the server in <b>test</b>/<mark>developer</mark> mode, use:</p>
                  <pre>python run_server.py dev</pre>
                  <p>To run the server in <mark>release</mark> mode, use <code>screen</code>:</p>
<pre>screen
source ~/.bash_profile
cd ~/Primerize_server
python run_Server.py release</pre>
                  <p>For details, please refer to <mark>src/command.sh</mark>. The <code>source</code> step is required here.</p>
                  <br/>
                  <p>When changes has been <code>commit</code> and <code>push</code> to the GitHub repository, you need to sync the local repository at the server. To do so, first <code>ssh</code> in the server as previously mentioned. Then,</p>
<pre>cd Primerize_server
git pull</pre>
                  <p>You may need to type your GitHub login credentials. The CherryPy session in the background will automatically restart the server to reflect the changes.</p>
                </div>
              </div>
              
              <hr/>
              <div class="row">
                <div class="col-lg-2 col-md-2 col-sm-3 col-xs-3">
                  <p class="lead" id="sys_misc_misc">
                    <span class="glyphicon glyphicon-wrench"></span>
                    <br/>
                    <span class="label label-info">Misc</span>
                  </p>
                </div>
                <div class="col-lg-10 col-md-10 col-sm-9 col-xs-9">
                  <ol>
                    <li><span class="label label-default">robots.txt</span> is a standard file for web crawlers. Crawlers/spiders can be a huge traffic that jams the server for actual users. The <mark>/robots.txt</mark> is made accessible by <code>const.py</code>. For details, please see <a href="http://www.robotstxt.org/" target="_blank" rel="noopener noreferrer external">here&nbsp;&nbsp;<span class="glyphicon glyphicon-new-window"></span></a> and <a href="http://tools.seobook.com/robots-txt/" target="_blank" rel="noopener noreferrer external">here&nbsp;&nbsp;<span class="glyphicon glyphicon-new-window"></span></a>.</li>
                    <li>For new setup, you will need to make the <mark>/cache</mark> directory.</li>
                    <li>For new setup, you will need to harlink the <code>matlab</code> excutable (see below). <abbr title="">alias</abbr> through <mark>.bash_profile</mark> does not work.
                      <br/>
                      <pre>sudo ln -s /home/ubuntu/MATLAB/bin/matlab /usr/bin/matlab</pre>
                    </li>
                    <li>For new setup, you will need to run <code>get_sys()</code> command first to generate the <mark>src/sys_ver.txt</mark>, which is not included in the repository. Visit this link in the browser:
                      <br/>
                      <pre>http://primerize.stanford.edu/get_sys</pre>
                    </li>
                    <li>The current server uses <span class="label label-default">pip</span> to manage all <span class="label label-primary">Python</span> packages. To list outdated packages, use:
                      <br/>
                      <pre>pip list --outdated</pre>
                      Or, use the following command for automatic update, which is also <mark>alias</mark>ed as part of <code>upd_a</code> command:<br/>
                      <pre>sudo -H pip install -U `pip list -o | grep -v -i warning | cut -f1 -d" " | sed "s/Some//g" | sed "s/Could//g" | tr  "\n|\r" " "`</pre>
                      The fully automatic update commands <code>upd_a</code> and <code>upd_c</code> are as stated in <mark>.bash_profile</mark>:
                      <br/>
<pre>alias upd_a='sudo apt-get update && sudo apt-get upgrade && sudo -H pip install -U `pip list -o | grep -v -i warning | cut -f1 -d" " | sed "s/Some//g" | sed "s/Could//g" | tr  "\n|\r" " "`'
alias upd_c='sudo apt-get autoclean && sudo apt-get clean && sudo apt-get autoremove'
</pre>
                    </li>
                    <li>The current server setup does <b><u>NOT</u></b> use <span class="label label-default">apache</span>. <span class="label label-danger">CherryPy</span> has built-in WSGI system.</li>
                    <li>Although <span class="label label-teal">octave</span> is installed, it is <b><u>NOT</u></b> used, due to its pooly optimized performance on runtime compared to <span class="label label-violet">MATLAB</span>.</li>
                    <li>To update the system version display, use:
                      <br/>
                      <pre>~/.ver_src</pre>
                    </li>
                  </ol>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>  
    </div>
  </div>

  <a href="#main" id="top" style="z-index:2000;">
    <div style="position:fixed; display:block; right:-5%; bottom:100px; opacity:0.85; z-index:2000; width:60px; height:60px;"><i class="nav_top"></i></div>
  </a>

</div>
{% endblock %}
